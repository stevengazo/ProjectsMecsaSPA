@inject IDbContextFactory<ProjectsDBContext> DbContextFactory

<EditForm Model="employee" OnSubmit="HandleOnsummit">
    <div class="card shadow-sm border-0">

        <!-- Header -->
        <div class="card-header bg-white border-0 pb-0">
            <h5 class="fw-semibold text-primary mb-0">
                Nuevo Empleado
            </h5>
            <small class="text-muted">
                Complete la información básica del colaborador
            </small>
        </div>

        <!-- Body -->
        <div class="card-body pt-4">
            <div class="row g-4">

                <!-- Nombre -->
                <div class="col-md-6">
                    <div class="form-floating">
                        <InputText id="FirstName"
                                   class="form-control"
                                   placeholder="Nombre"
                                   @bind-Value="employee.FirstName" />
                        <label for="FirstName">Nombre</label>
                    </div>
                </div>

                <!-- Apellido -->
                <div class="col-md-6">
                    <div class="form-floating">
                        <InputText id="LastName"
                                   class="form-control"
                                   placeholder="Apellido"
                                   @bind-Value="employee.LastName" />
                        <label for="LastName">Apellido</label>
                    </div>
                </div>

                <!-- Posición -->
                <div class="col-md-6">
                    <div class="form-floating">
                        <InputSelect id="Position"
                                     class="form-select"
                                     @bind-Value="employee.Position">
                            <option value="" selected disabled></option>
                            <option value="Tecnico">Técnico</option>
                            <option value="Operativo">Operativo</option>
                        </InputSelect>
                        <label for="Position">Posición</label>
                    </div>
                </div>

                <!-- Teléfono -->
                <div class="col-md-6">
                    <div class="form-floating">
                        <InputText id="PhoneNumber"
                                   class="form-control"
                                   placeholder="Teléfono"
                                   @bind-Value="employee.PhoneNumber" />
                        <label for="PhoneNumber">Teléfono</label>
                    </div>
                </div>

            </div>
        </div>

        <!-- Footer -->
        <div class="card-footer bg-white border-0 text-end">
            <button type="submit" class="btn btn-primary px-4">
                Guardar Empleado
            </button>
        </div>

    </div>
</EditForm>


@code {
    Employee employee = new();

    private async Task HandleOnsummit()
    {
        using var db = DbContextFactory.CreateDbContext();
        db.Employees.Add(employee);
        await db.SaveChangesAsync();

        employee = new Employee();
    }
}
